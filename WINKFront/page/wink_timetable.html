<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">
    <link rel="icon" type="image/png" href="assets/img/favicon.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>WINK TimeTable</title>

    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />

    <!--     Fonts and icons     -->
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.css" rel="stylesheet">

    <!-- CSS Files -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/css/gsdk-bootstrap-wizard.css" rel="stylesheet" />

    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link href="assets/css/demo.css" rel="stylesheet" />
    <style type="text/css">
        #layer_fixed {
            height: 35px;
            width: 100%;
            color: #555;
            font-size: 12px;
            position: fixed;
            z-index: 999;
            top: 0px;
            right: 0px;
        }

        table {
            width: 90%;
            table-layout: fixed;
            border-spacing: unset;
            border: 1px solid lightgray;
            margin: 0 auto;
        }

        table * {
            border: 1px solid lightgray;
            text-align: center;
        }

        tr {
            height: 60px;
            vertical-align: text-top;
            font-size: 0.8em;
        }

        #th-day {
            height: 20px;
        }

        th {
            vertical-align: text-top;
            padding: 5px;
            border: 1px solid lightgray;
        }

        td {
            font-size: 12px;
            margin: 0;
        }
    </style>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
</head>

<body onload=makeDiv()>
    <!-- body onload=func()-->
    <div class="image-container set-full-height">
        <!--   Creative Tim Branding   -->
        <div class="logo-container">
            <div id="layer_fixed">
                <span class="logo-contatiner" style='display:table; margin-left:auto; margin-right:auto;'>
                    <div class="logo">
                        <a href="wink_main.html">
                            <img src="assets/img/wink.png" />
                        </a>
                    </div>
                </span>
            </div>
            <!--   Big container   -->
            <div class="container">
                <div class="row">
                    <div class="col-sm-8 col-sm-offset-2">
                        <!--      Wizard container        -->
                        <div class="wizard-container" style="float:none; margin:0 auto">
                            <div class="card wizard-card" data-color="orange" id="wizardProfile">
                                <form action="logincheck/" method="post">
                                    <!--        You can switch ' data-color="orange" '  with one of the next bright colors: "blue", "green", "orange", "red"          -->

                                    <div class="wizard-header">
                                        <h3>
                                            <b>WINK</b> TimeTable <br>
                                        </h3>
                                    </div>

                                    <div class="wizard-navigation">
                                        <ul>
                                            <li><a href="#Timetable" data-toggle="tab">Timetable</a></li>
                                        </ul>

                                    </div>
                                    <div class="tab-content">
                                        <div class="tab-pane" id="Timetable">
                                            <div class="row">
                                                <h4 class="info-text"> Your Timetable</h4>
                                                <div class="col-sm-3">
                                                </div>

                                                <table id="timetable">
                                                    <colgroup>
                                                        <col width="*">
                                                        <col width="14%">
                                                        <col width="14%">
                                                        <col width="14%">
                                                        <col width="14%">
                                                        <col width="14%">
                                                        <col width="14%">
                                                    </colgroup>
                                                    <tr id="th-day">
                                                        <th id="empty-th"> </th>
                                                        <th scope=col>월</th>
                                                        <th scope=col>화</th>
                                                        <th scope=col>수</th>
                                                        <th scope=col>목</th>
                                                        <th scope=col>금</th>
                                                        <th scope=col>토</th>
                                                    </tr>

                                                    <tr>
                                                        <th>09:00 - 10:00</th>
                                                        <td id="first-tile"></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <th>10:00 - 11:00</th>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>

                                                    <tr>
                                                        <th>11:00 - 12:00</th>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>

                                                    <tr>
                                                        <th>12:00 - 13:00</th>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>

                                                    <tr>
                                                        <th>13:00 - 14:00</th>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>

                                                    <tr>
                                                        <th>14:00 - 15:00</th>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>

                                                    <tr>
                                                        <th>15:00 - 16:00</th>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>

                                                    <tr>
                                                        <th>16:00 - 17:00</th>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>

                                                    <tr>
                                                        <th>17:00 - 18:00</th>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>

                                                    <tr>
                                                        <th>18:00 - 19:00</th>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>

                                                    <tr>
                                                        <th>19:00 - 20:00</th>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>

                                                    <tr>
                                                        <th>20:00 - 21:00</th>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                </table>
                                                <div class="form-group">
                                                </div>
                                                <div class="wizard-footer height-wizard">
                                                    <div class="clearfix">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                            </div>
                            </form>
                        </div>
                    </div> <!-- wizard container -->
                </div>
            </div><!-- end row -->
        </div> <!--  big container -->

        <div class="footer">
            <div class="container">
                Made with <i class="fa fa-heart heart"></i> by WINK</a>
            </div>
        </div>

    </div>
    </div>
    <script>
        function makeDiv() {
            var data = [{
                    "student_code": "20153159",
                    "time": "A09:00~10:15",
                    "A": "blank",
                    "B": "수학과문명:01(인원:60)북악관8층2호실",
                    "C": "blank",
                    "D": "수학과문명:01(인원:60)북악관8층2호실",
                    "E": "blank",
                    "F": "blank"
                },
                {
                    "student_code": "20153159",
                    "time": "B10:30~11:45",
                    "A": "인공지능:01(인원:64)7호관6층11호실",
                    "B": "화일처리:02(인원:48)7호관2층32호실",
                    "C": "인공지능:01(인원:64)7호관6층11호실",
                    "D": "화일처리:02(인원:48)7호관2층32호실",
                    "E": "blank",
                    "F": "blank"
                },
                {
                    "student_code": "20153159",
                    "time": "C12:00~13:15",
                    "A": "blank",
                    "B": "컴파일러:01(인원:60)7호관2층31호실",
                    "C": "blank",
                    "D": "컴파일러:01(인원:60)7호관2층31호실",
                    "E": "blank",
                    "F": "blank"
                },
                {
                    "student_code": "20153159",
                    "time": "D13:30~14:45",
                    "A": "blank",
                    "B": "blank",
                    "C": "blank",
                    "D": "blank",
                    "E": "blank",
                    "F": "blank"
                },
                {
                    "student_code": "20153159",
                    "time": "E15:00~16:15",
                    "A": "임베디드시스템설계:01(인원:54)7호관4층45호실",
                    "B": "알고리즘:02(인원:80)7호관4층45호실",
                    "C": "임베디드시스템설계:01(인원:54)7호관4층45호실",
                    "D": "알고리즘:02(인원:80)7호관4층45호실",
                    "E": "blank",
                    "F": "blank"
                },
                {
                    "student_code": "20153159",
                    "time": "F16:30~17:45",
                    "A": "blank",
                    "B": "blank",
                    "C": "blank",
                    "D": "blank",
                    "E": "blank",
                    "F": "blank"
                },
                {
                    "student_code": "20153159",
                    "time": "G18:00~19:15",
                    "A": "blank",
                    "B": "blank",
                    "C": "blank",
                    "D": "blank",
                    "E": "blank",
                    "F": "blank"
                },
                {
                    "student_code": "20153159",
                    "time": "H19:25~20:40",
                    "A": "blank",
                    "B": "blank",
                    "C": "blank",
                    "D": "blank",
                    "E": "blank",
                    "F": "blank"
                }
            ];
            var table = $('#timetable');
            var offset = $("#first-tile").position();
            var height = $("#first-tile").height() + 1;
            var width = $("#first-tile").width() + 1;

            var dayArr = Array({}, {}, {}, {}, {}, {});
            data.forEach(element => {
                var time = element.time.charAt(0);

                if (element.A != "blank")
                    dayArr[0][time] = element.A.split(":")[0];

                if (element.B != "blank")
                    dayArr[1][time] = element.B.split(":")[0];

                if (element.C != "blank")
                    dayArr[2][time] = element.C.split(":")[0];

                if (element.D != "blank")
                    dayArr[3][time] = element.D.split(":")[0];

                if (element.E != "blank")
                    dayArr[4][time] = element.E.split(":")[0];

                if (element.F != "blank")
                    dayArr[5][time] = element.F.split(":")[0];

            });

            for (var i = 0; i < 6; i++) {
                tile(String.fromCodePoint(65 + i), dayArr[i]);
            }

            function tile(dayType, tiles) {
                var time = Object.keys(tiles);
                var subjects = Object.values(tiles);
                console.log(subject);
                var calcHeight = function (timeType, height) { // calc height
                    height /= 12; // 5분 높이
                    switch (timeType) {
                        case 'A':
                        case 'B':
                        case 'C':
                        case 'D':
                        case 'E':
                        case 'F':
                            height *= 15; // 115분 1시간 15분 수업
                            break;
                        case 1:
                        case 2:
                        case 3:
                        case 4:
                        case 5:
                        case 6:
                        case 7:
                        case 8:
                        case 9:
                            height *= 10; // 50분 수업
                            break;
                        default:
                    }
                    return height;
                }
                var calcTop = function (timeType, offset, height) { // calc top  
                    var top = offset.top;
                    height += 1;
                    switch (timeType) {
                        case 'A': // 9:00-10:15
                        case 'B': // 10:30-11:45
                        case 'C': // 12:00-13:15
                        case 'D': // 13:30-14:45
                        case 'E': // 15:00-16:15
                        case 'F': // 16:30-17:45
                            top += height * 1.5 * (timeType.charCodeAt(0) - 65); // 'A' ascii code: 65
                            break;
                        case 1: // 9:00-9:50
                        case 2: // 10:00-10:50
                        case 3: // 11:00-11:50
                        case 4: // 12:00-12:50
                        case 5: // 13:00-13:54
                        case 6: // 14:00-14:50
                        case 7: // 15:00-15:50
                        case 8: // 16:00-16:50
                        case 9: // 17:00-17:50
                            top += height * (timeType - 1);
                            break;
                        default:
                    }
                    return top;
                }
                var calcLeft = function (dayType, offset, width) { // calc left  !!! todo: 반복문 'F'-'A' 더 간단하게 가능하지않을까
                    var left = offset.left;
                    width += 1; // border
                    left += width * (dayType.charCodeAt(0) - 65);

                    return left;
                }

                for (var i = 0; i < time.length; i++) {
                    var timeType = time[i];
                    var tileHeight, tileTop, tileLeft;

                    tileHeight = calcHeight(timeType, height);
                    tileTop = calcTop(timeType, offset, height);
                    tileLeft = calcLeft(dayType, offset, width);

                    var subject = subjects[i];
                    var subjectName = "<div>" + subject + "</div>";
                    var tile = $(subjectName).css({
                        'background-color': 'bisque',
                        'text-align': 'center',
                        'position': 'absolute',
                        'padding': '3px 6px',
                        'margin': '1px',
                        'top': tileTop, //offset.top,
                        'left': tileLeft, //offset.left,
                        'width': width,
                        'height': tileHeight // height
                    });

                    table.after(tile);
                }
            }
        };
    </script>
</body>

<!--   Core JS Files   -->
<script src="assets/js/jquery-2.2.4.min.js" type="text/javascript"></script>
<script src="assets/js/bootstrap.min.js" type="text/javascript"></script>
<script src="assets/js/jquery.bootstrap.wizard.js" type="text/javascript"></script>

<!--  Plugin for the Wizard -->
<script src="assets/js/gsdk-bootstrap-wizard.js"></script>

<!--  More information about jquery.validate here: http://jqueryvalidation.org/	 -->
<script src="assets/js/jquery.validate.min.js"></script>

</html>